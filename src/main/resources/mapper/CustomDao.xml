<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.CustomDao">
  <resultMap id="BaseResultMap" type="com.bean.Custom">
    <id column="CUSTOMID" jdbcType="INTEGER" property="customid" />
    <result column="CUSTOMNAME"  property="customname" />
    <result column="SEX"  property="sex" />
    <result column="TELEPHONE"  property="telephone" />
    <result column="COMPANY"  property="company" />
    <result column="ADDRESS"  property="address" />
    <result column="STATUS"  property="status" />
    <result column="CREATETIME"  property="createtime" />
    <result column="CREATEID"  property="createid" />
    <result column="LEADING"  property="leading" />
    <result column="DISTRACTIME" jdbcType="VARCHAR"  property="distractime" />
    <result column="SERVICEID"  property="serviceid" />
    <result column="DISTRACT"  property="distract" />
    <result column="HOMEADDRESS"  property="homeaddress" />
  </resultMap>
  <sql id="Base_Column_List">
    CUSTOMID, CUSTOMNAME, SEX, TELEPHONE, COMPANY, ADDRESS, `STATUS`, CREATETIME, CREATEID, 
    DISTRACTIME, SERVICEID, DISTRACT, HOMEADDRESS
  </sql>
  <update id="updateCustom">
    update custom set CUSTOMNAME=#{customname},SEX=#{sex},TELEPHONE=#{telephone},
    COMPANY=#{company},ADDRESS=#{address},STATUS=#{status},DISTRACT=#{distract},
    HOMEADDRESS=#{homeaddress} where CUSTOMID=#{customid}
  </update>
  <update id="cancelCust">
    update custom set STATUS='不可用' where CUSTOMID=#{customid}
  </update>
  <update id="recoverCust">
    update custom set STATUS='可用' where CUSTOMID=#{customid}
  </update>
  <update id="distinctCust" parameterType="Custom">
    update custom set custom.LEADING=#{leading},DISTRACTIME=#{distractime} where CUSTOMID=#{customid}
  </update>

  <resultMap id="getAll" type="com.bean.Custom">
    <id column="CUSTOMID"  property="customid" />
    <result column="CUSTOMNAME" property="customname" />
    <result column="SEX"  property="sex" />
    <result column="TELEPHONE"  property="telephone" />
    <result column="COMPANY"  property="company" />
    <result column="ADDRESS"  property="address" />
    <result column="STATUS" property="status" />
    <result column="CREATETIME"  property="createtime" />
    <result column="CREATEID"  property="createid" />
    <result column="leading"  property="leading" />
    <result column="DISTRACTIME"  property="distractime" />
    <result column="SERVICEID" property="serviceid" />
    <result column="DISTRACT"  property="distract" />
    <result column="HOMEADDRESS"  property="homeaddress" />
    <association property="province" javaType="Province">
      <id property="id" column="ID"/>
      <result property="pName" column="P_NAME"/>
    </association>
    <association property="users" javaType="Users">
      <id column="u_id"  property="uId" />
      <result column="uname"  property="uname" />
      <result column="dept_id"  property="deptId" />
      <result column="job_id"  property="jobId" />
    </association>
  </resultMap>
  <select id="getAllCustom" resultMap="getAll">
    SELECT * FROM custom LEFT JOIN province ON custom.address = province.ID
    LEFT JOIN users ON custom.CREATEID = users.u_id limit #{page},#{size}
  </select>
  <select id="countCustom" resultType="java.lang.Integer">
    SELECT count(*) FROM custom
  </select>
  <select id="getOneCustom" resultMap="getAll">
    SELECT * FROM custom LEFT JOIN province ON custom.address = province.ID
    LEFT JOIN users ON custom.CREATEID = users.u_id where CUSTOMID=#{customid}
  </select>

  <!--<select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from custom
    where CUSTOMID = #{customid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from custom
    where CUSTOMID = #{customid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" keyColumn="CUSTOMID" keyProperty="customid" parameterType="com.bean.Custom" useGeneratedKeys="true">
    insert into custom (CUSTOMNAME, SEX, TELEPHONE, 
      COMPANY, ADDRESS, `STATUS`, 
      CREATETIME, CREATEID, DISTRACTIME, 
      SERVICEID, DISTRACT, HOMEADDRESS
      )
    values (#{customname,jdbcType=VARCHAR}, #{sex,jdbcType=VARCHAR}, #{telephone,jdbcType=VARCHAR}, 
      #{company,jdbcType=VARCHAR}, #{address,jdbcType=INTEGER}, #{status,jdbcType=VARCHAR}, 
      #{createtime,jdbcType=DATE}, #{createid,jdbcType=INTEGER}, #{distractime,jdbcType=DATE}, 
      #{serviceid,jdbcType=INTEGER}, #{distract,jdbcType=VARCHAR}, #{homeaddress,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" keyColumn="CUSTOMID" keyProperty="customid" parameterType="com.bean.Custom" useGeneratedKeys="true">
    insert into custom
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="customname != null">
        CUSTOMNAME,
      </if>
      <if test="sex != null">
        SEX,
      </if>
      <if test="telephone != null">
        TELEPHONE,
      </if>
      <if test="company != null">
        COMPANY,
      </if>
      <if test="address != null">
        ADDRESS,
      </if>
      <if test="status != null">
        `STATUS`,
      </if>
      <if test="createtime != null">
        CREATETIME,
      </if>
      <if test="createid != null">
        CREATEID,
      </if>
      <if test="distractime != null">
        DISTRACTIME,
      </if>
      <if test="serviceid != null">
        SERVICEID,
      </if>
      <if test="distract != null">
        DISTRACT,
      </if>
      <if test="homeaddress != null">
        HOMEADDRESS,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="customname != null">
        #{customname,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        #{sex,jdbcType=VARCHAR},
      </if>
      <if test="telephone != null">
        #{telephone,jdbcType=VARCHAR},
      </if>
      <if test="company != null">
        #{company,jdbcType=VARCHAR},
      </if>
      <if test="address != null">
        #{address,jdbcType=INTEGER},
      </if>
      <if test="status != null">
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null">
        #{createtime,jdbcType=DATE},
      </if>
      <if test="createid != null">
        #{createid,jdbcType=INTEGER},
      </if>
      <if test="distractime != null">
        #{distractime,jdbcType=DATE},
      </if>
      <if test="serviceid != null">
        #{serviceid,jdbcType=INTEGER},
      </if>
      <if test="distract != null">
        #{distract,jdbcType=VARCHAR},
      </if>
      <if test="homeaddress != null">
        #{homeaddress,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.bean.Custom">
    update custom
    <set>
      <if test="customname != null">
        CUSTOMNAME = #{customname,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        SEX = #{sex,jdbcType=VARCHAR},
      </if>
      <if test="telephone != null">
        TELEPHONE = #{telephone,jdbcType=VARCHAR},
      </if>
      <if test="company != null">
        COMPANY = #{company,jdbcType=VARCHAR},
      </if>
      <if test="address != null">
        ADDRESS = #{address,jdbcType=INTEGER},
      </if>
      <if test="status != null">
        `STATUS` = #{status,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null">
        CREATETIME = #{createtime,jdbcType=DATE},
      </if>
      <if test="createid != null">
        CREATEID = #{createid,jdbcType=INTEGER},
      </if>
      <if test="distractime != null">
        DISTRACTIME = #{distractime,jdbcType=DATE},
      </if>
      <if test="serviceid != null">
        SERVICEID = #{serviceid,jdbcType=INTEGER},
      </if>
      <if test="distract != null">
        DISTRACT = #{distract,jdbcType=VARCHAR},
      </if>
      <if test="homeaddress != null">
        HOMEADDRESS = #{homeaddress,jdbcType=VARCHAR},
      </if>
    </set>
    where CUSTOMID = #{customid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.bean.Custom">
    update custom
    set CUSTOMNAME = #{customname,jdbcType=VARCHAR},
      SEX = #{sex,jdbcType=VARCHAR},
      TELEPHONE = #{telephone,jdbcType=VARCHAR},
      COMPANY = #{company,jdbcType=VARCHAR},
      ADDRESS = #{address,jdbcType=INTEGER},
      `STATUS` = #{status,jdbcType=VARCHAR},
      CREATETIME = #{createtime,jdbcType=DATE},
      CREATEID = #{createid,jdbcType=INTEGER},
      DISTRACTIME = #{distractime,jdbcType=DATE},
      SERVICEID = #{serviceid,jdbcType=INTEGER},
      DISTRACT = #{distract,jdbcType=VARCHAR},
      HOMEADDRESS = #{homeaddress,jdbcType=VARCHAR}
    where CUSTOMID = #{customid,jdbcType=INTEGER}
  </update>-->
</mapper>