<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.UsersDao">
  <resultMap id="BaseResultMap" type="com.bean.Users">
    <id column="u_id"  property="uId" />
    <result column="uname"  property="uname" />
    <result column="uname" property="names"></result>
    <result column="upassword"  property="upassword" />
    <result column="utelephone"  property="utelephone" />
    <result column="dept_id"  property="deptId" />
    <result column="job_id"  property="jobId" />
    <result column="sex"  property="sex" />
    <result column="status"  property="status" />
    <result column="hiredate"  property="hiredate" />
    <result column="leavedate"  property="leavedate" />
    <result column="birthday" property="birthday" />
  </resultMap>
  <sql id="Base_Column_List">
    u_id, uname, upassword, utelephone, dept_id, job_id, sex, `status`, hiredate, leavedate, 
    birthday
  </sql>
  <select id="login" resultMap="BaseResultMap">
    select * from users where uname=#{uname} and upassword=#{upassword}
  </select>
  <resultMap id="getAll" type="com.bean.Users">
    <id column="u_id"  property="uId" />
    <result column="uname"  property="uname" />
    <result column="upassword"  property="upassword" />
    <result column="utelephone"  property="utelephone" />
    <result column="dept_id"  property="deptId" />
    <result column="job_id"  property="jobId" />
    <result column="sex"  property="sex" />
    <result column="status"  property="status" />
    <result column="hiredate"  property="hiredate" />
    <result column="leavedate"  property="leavedate" />
    <result column="birthday" property="birthday" />
    <association property="dept" javaType="Dept">
      <id column="dept_id"  property="deptId" />
      <result column="dept_name"  property="deptName" />
      <result column="dept_state"  property="deptState" />
    </association>
    <association property="job" javaType="Job">
      <id column="job_id"  property="jobId" />
      <result column="job_name"  property="jobName" />
      <result column="job_state"  property="jobState" />
      <result column="job_dept_id"  property="jobDeptId" />
    </association>
  </resultMap>
  <select id="getAllUsersByPage" resultMap="getAll">
    SELECT * FROM users LEFT JOIN dept ON users.dept_id=dept.dept_id
    LEFT JOIN job ON users.job_id=job.job_id limit #{page},#{size}
  </select>
  <select id="countUsers" resultType="java.lang.Integer">
    select count(*) from users
  </select>
  <select id="getOneUser" resultMap="getAll">
    select * from users where u_id=#{uId}
  </select>


</mapper>